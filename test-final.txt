
> espaco-dialogico@1.0.0 test
> npm run services:up && npm run services:wait:database && npm run db:ensure:test && cross-env NODE_ENV=test JEST_EXPLICIT_RUN=true concurrently -k -s first "next dev" "wait-on -t 30000 -i 1000 -v http://localhost:3000/api/v1/status && jest --runInBand --verbose --forceExit"


> espaco-dialogico@1.0.0 services:up
> docker compose -f infra/compose.yaml up -d

 Container espaco_dialogico  Running

> espaco-dialogico@1.0.0 services:wait:database
> node infra/scripts/wait-for-postgres.js



­ƒöä Esperando PostgreSQL ficar dispon├¡vel...

Ô£à PostgreSQL est├í pronto e operacional!


> espaco-dialogico@1.0.0 db:ensure:test
> node infra/scripts/ensure-test-db.js .env.test

­ƒöº Carregado arquivo de ambiente: .env.test
­ƒöù (Tentativa 1/20) Conectando (host=localhost port=5434 user=local_user)...
Ô£à Conex├úo administrativa estabelecida.
Ô£à Banco de teste 'local_db_test' j├í existe.
[1] waiting for 1 resources: http://localhost:3000/api/v1/status
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[0]  ÔÜá Port 3000 is in use by process 30524, using available port 3001 instead.
[0]    Ôû▓ Next.js 15.4.10
[0]    - Local:        http://localhost:3001
[0]    - Network:      http://192.168.0.44:3001
[0]    - Environments: .env.test
[0] 
[0]  Ô£ô Starting...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[0]  Ô£ô Ready in 2.9s
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] making HTTP(S) head request to  url:http://localhost:3000/api/v1/status ...
[1] wait-on(29088) Timed out waiting for: http://localhost:3000/api/v1/status; exiting with error
[1] Error: Timed out waiting for: http://localhost:3000/api/v1/status
[1]     at C:\www\espaco-dialogico\node_modules\wait-on\lib\wait-on.js:131:31
[1]     at doInnerSub (C:\www\espaco-dialogico\node_modules\rxjs\dist\cjs\internal\operators\mergeInternals.js:22:31)
[1]     at outerNext (C:\www\espaco-dialogico\node_modules\rxjs\dist\cjs\internal\operators\mergeInternals.js:17:70)
[1]     at OperatorSubscriber._this._next (C:\www\espaco-dialogico\node_modules\rxjs\dist\cjs\internal\operators\OperatorSubscriber.js:33:21)
[1]     at Subscriber.next (C:\www\espaco-dialogico\node_modules\rxjs\dist\cjs\internal\Subscriber.js:51:18)
[1]     at AsyncAction.work (C:\www\espaco-dialogico\node_modules\rxjs\dist\cjs\internal\observable\timer.js:28:28)
[1]     at AsyncAction._execute (C:\www\espaco-dialogico\node_modules\rxjs\dist\cjs\internal\scheduler\AsyncAction.js:79:18)
[1]     at AsyncAction.execute (C:\www\espaco-dialogico\node_modules\rxjs\dist\cjs\internal\scheduler\AsyncAction.js:67:26)
[1]     at AsyncScheduler.flush (C:\www\espaco-dialogico\node_modules\rxjs\dist\cjs\internal\scheduler\AsyncScheduler.js:38:33)
[1]     at listOnTimeout (node:internal/timers:614:17)
[1] wait-on -t 30000 -i 1000 -v http://localhost:3000/api/v1/status && jest --runInBand --verbose --forceExit exited with code 1
--> Sending SIGTERM to other processes..
[0] next dev exited with code 1
